(()=>{"use strict";var e,t={352:()=>{const e=window.wp.blocks,t=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,r=window.ReactJSXRuntime,a=[{label:(0,t.__)("Roadmap","elementor-to-gutenberg"),value:"roadmap"},{label:(0,t.__)("Satellite","elementor-to-gutenberg"),value:"satellite"},{label:(0,t.__)("Hybrid","elementor-to-gutenberg"),value:"hybrid"},{label:(0,t.__)("Terrain","elementor-to-gutenberg"),value:"terrain"}],s=JSON.parse('{"UU":"progressus/google-map"}');(0,e.registerBlockType)(s.UU,{edit:({attributes:e,setAttributes:s})=>{const i=e.location||{},g=e.address,u=e.lat,p=e.lng,{zoom:d,height:c,mapType:m}=e,h=i&&i.address?i.address:g||"",b=i&&null!=i.lat?i.lat:null!=u?u:null,f=i&&null!=i.lng?i.lng:null!=p?p:null,y=(0,n.useBlockProps)(),w=(0,l.useRef)(null),_=(0,l.useRef)(null),x=(0,l.useRef)(null),v=(0,l.useRef)(null),j=(0,l.useRef)(null),$=(0,l.useRef)(null),[C,I]=(0,l.useState)(h||""),[R,k]=(0,l.useState)([]),[S,T]=(0,l.useState)(!1),[O,U]=(0,l.useState)(!1),z=e=>{if(null==e||""===e)return"0px";if("number"==typeof e)return e+"px";if("string"==typeof e){const t=e.trim();return/[a-z%]$/i.test(t)||isNaN(parseFloat(t))?t:t+"px"}return String(e)},B=e?.style?.spacing?.padding||e.padding||{top:0,right:0,bottom:0,left:0},N=e?.style?.spacing?.margin||e.margin||{top:0,right:0,bottom:0,left:0};(0,l.useEffect)((()=>{I(h||"")}),[h]),(0,l.useEffect)((()=>{if(!("undefined"!=typeof window&&window.google&&window.google.maps&&window.google.maps.places))return!C||C.length<3?(k([]),void U(!1)):(T(!0),U(!0),$.current&&clearTimeout($.current),$.current=setTimeout((()=>{const e=`https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=5&q=${encodeURIComponent(C)}`;fetch(e,{headers:{Accept:"application/json"}}).then((e=>e.json())).then((e=>{k((e||[]).map((e=>({label:e.display_name,lat:e.lat,lon:e.lon}))))})).catch((()=>k([]))).finally((()=>T(!1)))}),300),()=>clearTimeout($.current))}),[C]);const F={height:`${c}px`,background:"#f3f3f3",display:"flex",alignItems:"center",justifyContent:"center",color:"#555",border:"1px solid #ddd"};(0,l.useEffect)((()=>{if("undefined"!=typeof window&&window.google&&window.google.maps&&w.current){try{const e=null!==b&&null!==f?{lat:parseFloat(b),lng:parseFloat(f)}:null;if(x.current=new window.google.maps.Map(w.current,{zoom:d||14,mapTypeId:m||"roadmap"}),e)x.current.setCenter(e);else if(h)try{(new window.google.maps.Geocoder).geocode({address:h},((e,t)=>{"OK"===t&&e&&e[0]&&x.current.setCenter(e[0].geometry.location)}))}catch(e){}}catch(e){}return()=>{try{v.current&&(v.current=null)}catch(e){}try{x.current&&(x.current=null)}catch(e){}}}}),[b,f,h,d,m]),(0,l.useEffect)((()=>{if("undefined"!=typeof window&&window.google&&window.google.maps&&window.google.maps.places&&_.current)try{j.current=new window.google.maps.places.Autocomplete(_.current),j.current.setFields(["formatted_address","geometry"]);const e=()=>{const e=j.current.getPlace();if(!e)return;const t=e.geometry&&e.geometry.location?e.geometry.location.lat():null,n=e.geometry&&e.geometry.location?e.geometry.location.lng():null,o=e.formatted_address||_.current.value||"";s({location:{address:o,lat:t,lng:n},address:o,lat:t,lng:n}),I(o)};return j.current.addListener("place_changed",e),()=>{try{window.google.maps.event.clearInstanceListeners(j.current)}catch(e){}j.current=null}}catch(e){}}),[]);let M="";return null!==b&&null!==f?M=`https://maps.google.com/maps?q=${encodeURIComponent(b)},${encodeURIComponent(f)}&z=${encodeURIComponent(d)}&output=embed`:h&&(M=`https://maps.google.com/maps?q=${encodeURIComponent(h)}&z=${encodeURIComponent(d)}&output=embed`),(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(n.InspectorControls,{children:(0,r.jsxs)(o.PanelBody,{title:(0,t.__)("Map Settings","elementor-to-gutenberg"),initialOpen:!0,children:[(0,r.jsxs)("p",{style:{marginTop:0,marginBottom:8},children:[(0,t.__)("Set your Google Maps API Key in the plugin's Integrations Settings page.","elementor-to-gutenberg")," ",(0,r.jsx)("a",{href:"/wp-admin/admin.php?page=gutenberg-settings",target:"_blank",rel:"noopener noreferrer",children:(0,t.__)("Open Settings","elementor-to-gutenberg")})," ",(0,t.__)("Create your key","elementor-to-gutenberg")," ",(0,r.jsx)("a",{href:"https://developers.google.com/maps/documentation/embed/get-api-key",target:"_blank",rel:"noopener noreferrer",children:(0,t.__)("here.","elementor-to-gutenberg")})]}),(0,r.jsxs)("div",{style:{marginBottom:8},children:[(0,r.jsx)("label",{className:"components-base-control__label",children:(0,t.__)("Address","elementor-to-gutenberg")}),(0,r.jsx)("input",{type:"text",ref:_,className:"components-text-control__input",value:C,onChange:e=>{return t=e.target.value,I(t),void s({location:{address:t,lat:null,lng:null},address:t,lat:null,lng:null});var t},onFocus:()=>{R.length&&U(!0)},onBlur:()=>setTimeout((()=>U(!1)),150),placeholder:(0,t.__)("Start typing an address...","elementor-to-gutenberg"),style:{width:"100%"}}),O&&(0,r.jsxs)("div",{style:{border:"1px solid #ddd",background:"#fff",maxHeight:200,overflowY:"auto",marginTop:4,zIndex:9999},children:[S&&(0,r.jsx)("div",{style:{padding:8},children:(0,t.__)("Searchingâ€¦","elementor-to-gutenberg")}),!S&&0===R.length&&(0,r.jsx)("div",{style:{padding:8},children:(0,t.__)("No suggestions","elementor-to-gutenberg")}),R.map(((e,t)=>(0,r.jsx)("button",{type:"button",className:"components-button",onMouseDown:t=>{t.preventDefault(),(e=>{const t={address:e.label,lat:parseFloat(e.lat),lng:parseFloat(e.lon)};s({location:t,address:e.label,lat:t.lat,lng:t.lng}),I(e.label),k([]),U(!1)})(e)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",border:"none",background:"transparent"},children:e.label},t)))]})]}),(0,r.jsx)(o.TextControl,{label:(0,t.__)("Latitude (optional)","elementor-to-gutenberg"),value:null===b?"":String(b),onChange:e=>s({lat:""===e?null:parseFloat(e)})}),(0,r.jsx)(o.TextControl,{label:(0,t.__)("Longitude (optional)","elementor-to-gutenberg"),value:null===f?"":String(f),onChange:e=>s({lng:""===e?null:parseFloat(e)})}),(0,r.jsx)(o.RangeControl,{label:(0,t.__)("Zoom","elementor-to-gutenberg"),value:d,onChange:e=>s({zoom:e}),min:1,max:20}),(0,r.jsx)(o.RangeControl,{label:(0,t.__)("Height (px)","elementor-to-gutenberg"),value:c,onChange:e=>s({height:e}),min:100,max:1200}),(0,r.jsx)(o.SelectControl,{label:(0,t.__)("Map Type","elementor-to-gutenberg"),value:m,options:a,onChange:e=>s({mapType:e})}),(0,r.jsxs)(o.PanelBody,{title:(0,t.__)("Dimensions","progressus-gutenberg"),initialOpen:!1,children:[(0,r.jsx)(o.__experimentalBoxControl,{label:(0,t.__)("Padding","progressus-gutenberg"),values:{top:z(B.top),right:z(B.right),bottom:z(B.bottom),left:z(B.left)},onChange:t=>{const n={top:parseInt(t.top)||0,right:parseInt(t.right)||0,bottom:parseInt(t.bottom)||0,left:parseInt(t.left)||0},o={...e.style||{},spacing:{...e.style?.spacing||{},...(e.style,{padding:n})}};s({padding:n,_padding:n,style:o})},__nextHasNoMarginBottom:!0}),(0,r.jsx)(o.__experimentalBoxControl,{label:(0,t.__)("Margin","progressus-gutenberg"),values:{top:z(N.top),right:z(N.right),bottom:z(N.bottom),left:z(N.left)},onChange:t=>{const n={top:parseInt(t.top)||0,right:parseInt(t.right)||0,bottom:parseInt(t.bottom)||0,left:parseInt(t.left)||0},o={...e.style||{},spacing:{...e.style?.spacing||{},...(e.style,{margin:n})}};s({margin:n,_margin:n,style:o})},__nextHasNoMarginBottom:!0})]})]})}),(0,r.jsx)("div",{...y,children:(0,r.jsx)("div",{style:F,children:"undefined"!=typeof window&&window.google&&window.google.maps?(0,r.jsx)("div",{ref:w,style:{width:"100%",height:"100%"}}):M?(0,r.jsx)("iframe",{src:M,style:{width:"100%",height:"100%",border:0},loading:"lazy"}):(0,r.jsx)("div",{children:(0,t.__)("Enter an address or coordinates to preview","elementor-to-gutenberg")})})})]})},save:({attributes:e})=>{const{location:t,address:o,lat:a,lng:s,zoom:i,height:g}=e,u=t&&t.address?t.address:o||"",p=t&&null!=t.lat?t.lat:null!=a?a:null,d=t&&null!=t.lng?t.lng:null!=s?s:null;let c="";null!==p&&null!==d?c=`https://maps.google.com/maps?q=${encodeURIComponent(p)},${encodeURIComponent(d)}&z=${encodeURIComponent(i)}&output=embed`:u&&(c=`https://maps.google.com/maps?q=${encodeURIComponent(u)}&z=${encodeURIComponent(i)}&output=embed`);const m=e=>{if(null==e||""===e)return 0;if("number"==typeof e)return e;if("string"==typeof e){const t=e.trim().match(/^([0-9.+-]+)/);return t?parseInt(t[1],10):0}if("object"==typeof e&&e.unit){const t=e.top||0;return parseInt(t,10)||0}return Number(e)||0},h=t=>{var n,o,l,r;const a=(s=t,e?.style?.spacing&&e.style.spacing[s]?e.style.spacing[s]:e&&e[`_${s}`]?e[`_${s}`]:e&&e[s]?e[s]:null);var s;if(!a)return null;if(a.unit){const e=a.unit||"px";return`${a.top||0}${e} ${a.right||0}${e} ${a.bottom||0}${e} ${a.left||0}${e}`}return`${m((null!==(n=a.top)&&void 0!==n?n:0===a.top)?a.top:null)}px ${m((null!==(o=a.right)&&void 0!==o?o:0===a.right)?a.right:null)}px ${m((null!==(l=a.bottom)&&void 0!==l?l:0===a.bottom)?a.bottom:null)}px ${m((null!==(r=a.left)&&void 0!==r?r:0===a.left)?a.left:null)}px`},b=h("margin"),f=h("padding"),y=[];b&&y.push(`margin:${b}`),f&&y.push(`padding:${f}`);const w=y.join(";"),_=`<div class="${n.useBlockProps.save().className||""}" style="${w}">${c?`<iframe src="${c}" style="width:100%;height:${g}px;border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>`:`<div style="height:${g}px;background:#f3f3f3;border:1px solid #ddd"></div>`}</div>`;return(0,r.jsx)(l.RawHTML,{children:_})}})}},n={};function o(e){var l=n[e];if(void 0!==l)return l.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,l,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,l,r]=e[u],s=!0,i=0;i<n.length;i++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](n[i])))?n.splice(i--,1):(s=!1,r<a&&(a=r));if(s){e.splice(u--,1);var g=l();void 0!==g&&(t=g)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,l,r]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={725:0,793:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var l,r,[a,s,i]=n,g=0;if(a.some((t=>0!==e[t]))){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(i)var u=i(o)}for(t&&t(n);g<a.length;g++)r=a[g],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=globalThis.webpackChunkgutenberg_plugin=globalThis.webpackChunkgutenberg_plugin||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=o.O(void 0,[793],(()=>o(352)));l=o.O(l)})();