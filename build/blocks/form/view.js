document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".progressus-form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault();const s=e.querySelector(".form-submit-button"),r=e.querySelector(".form-message"),o=new FormData(e),a=e.dataset.formName,n=e.dataset.successMessage,m=e.dataset.errorMessage;o.append("action","progressus_form_submit"),o.append("nonce",progressusFormData.nonce),o.append("form_name",a);const c=s.innerHTML;s.disabled=!0,s.innerHTML=`\n\t\t\t\t<svg class="form-loader" width="20" height="20" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-dasharray="31.4 31.4" stroke-linecap="round">\n\t\t\t\t\t\t<animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="1s" repeatCount="indefinite"/>\n\t\t\t\t\t</circle>\n\t\t\t\t</svg>\n\t\t\t\t${c}\n\t\t\t`,r.style.display="none",r.className="form-message",fetch(progressusFormData.ajaxUrl,{method:"POST",body:o}).then((e=>e.json())).then((t=>{s.disabled=!1,s.innerHTML=c,r.style.display="block",t.success?(r.className="form-message success-message",r.textContent=t.data.message||n,e.reset()):(r.className="form-message error-message",r.textContent=t.data.message||m),setTimeout((()=>{r.style.display="none"}),5e3)})).catch((e=>{console.error("Form submission error:",e),s.disabled=!1,s.innerHTML=c,r.style.display="block",r.className="form-message error-message",r.textContent=m,setTimeout((()=>{r.style.display="none"}),5e3)}))}))}))}));